import streamlit as st
import json

# ---- ROUTES DETAILS ----

#è·¯ç·šæ–¹å‘
routes = {
    "1": {
        "æ–¹å‘": {
            "MAF": {
                "æ­£å¸¸è·¯ç·š": {
                    "åœç«™": [
                        "è·‘é¦¬åœ° (èŸ é¾é“)", "ç®•éˆåŠï¼Œè—å¡˜é“", "æ¡‚èŠ³è¡—ï¼Œæˆå’Œé“", "å±±æ‘é“ï¼Œæˆå’Œé“", "æ™¯å…‰è¡—",
                        "é¤Šå’Œé†«é™¢ï¼Œé»ƒæ³¥æ¶Œé“", "è·‘é¦¬åœ°é¦¬å ´ï¼Œé»ƒæ³¥æ¶Œé“", "ç«‹å¾·é‡Œï¼Œæ‘©åˆ©è‡£å±±é“", "åˆ©æ™¯é…’åº—ï¼Œç£ä»”é“",
                        "ä¿®é “çƒå ´ï¼Œè»’å°¼è©©é“", "æ™é “è¡—ï¼Œè»’å°¼è©©é“", "å¤ªå¤å»£å ´ï¼Œé‡‘é˜é“",
                        "ä¸­éŠ€å¤§å»ˆï¼Œé‡‘é˜é“", "ç½®åœ°å»£å ´ï¼Œå¾·è¼”é“ä¸­", "ä¸­ç’°è¡—å¸‚ï¼Œå¾·è¼”é“ä¸­", "æ€¥åº‡åˆ©è¡—ï¼Œå¾·è¼”é“ä¸­",
                        "ä¸Šç’° (æ¸¯æ¾³ç¢¼é ­)"
                    ],
                    "åœ°åœ–": "https://umap.openstreetmap.fr/en/map/1-brr-maf_1229516"
                },
                "è·‘é¦¬æ—¥ï¼Œä¸åœé¦¬å ´": {
                    "åœç«™": [
                        "è·‘é¦¬åœ° (èŸ é¾é“)", "ç®•éˆåŠï¼Œè—å¡˜é“", "æ¡‚èŠ³è¡—ï¼Œæˆå’Œé“", "å±±æ‘é“ï¼Œæˆå’Œé“", "æ™¯å…‰è¡—",
                        "é¤Šå’Œé†«é™¢ï¼Œé»ƒæ³¥æ¶Œé“", "ç«‹å¾·é‡Œï¼Œæ‘©åˆ©è‡£å±±é“", "åˆ©æ™¯é…’åº—ï¼Œç£ä»”é“",
                        "ä¿®é “çƒå ´ï¼Œè»’å°¼è©©é“", "æ™é “è¡—ï¼Œè»’å°¼è©©é“", "å¤ªå¤å»£å ´ï¼Œé‡‘é˜é“",
                        "ä¸­éŠ€å¤§å»ˆï¼Œé‡‘é˜é“", "ç½®åœ°å»£å ´ï¼Œå¾·è¼”é“ä¸­", "ä¸­ç’°è¡—å¸‚ï¼Œå¾·è¼”é“ä¸­", "æ€¥åº‡åˆ©è¡—ï¼Œå¾·è¼”é“ä¸­",
                        "ä¸Šç’° (æ¸¯æ¾³ç¢¼é ­)"
                    ],
                    "åœ°åœ–": "https://umap.openstreetmap.fr/en/map/1-brr-maf-race_1229517"
                }
            },
            "BRR": {
                "æ­£å¸¸è·¯ç·š": {
                    "åœç«™": [
                        "ä¸Šç’° (æ¸¯æ¾³ç¢¼é ­)", "ç„¡é™æ¥µå»£å ´ï¼Œå¾·è¼”é“ä¸­", "æ’ç”ŸéŠ€è¡Œç¸½è¡Œå¤§å»ˆï¼Œå¾·è¼”é“ä¸­", "å¾·å¿Œåˆ©å£«è¡—ï¼Œå¾·è¼”é“ä¸­", 
                        "çš‡ååƒå»£å ´ ï¼Œé®æ‰“é“", "é‡‘é˜å»Šï¼Œé‡‘é˜é“", "è»å™¨å» è¡—ï¼Œè»’å°¼è©©é“", "æŸ¯å¸ƒé€£é“ï¼Œè»’å°¼è©©é“", 
                        "è­šè‡£é“ï¼Œè²æ—æ˜é“", "å…‹è¡—ï¼Œç£ä»”é“", "å¤©æ¨‚é‡Œï¼Œç£ä»”é“", "é€¸å»¬ï¼Œé»ƒæ³¥æ¶Œé“", 
                        "é›…è°·å¤§å»ˆï¼Œé»ƒæ³¥æ¶Œé“", "è·‘é¦¬åœ°ï¼ˆä¸‹ï¼‰ï¼Œé»ƒæ³¥æ¶Œé“", "å¥•è”­è¡—ï¼Œæˆå’Œé“", "æ˜‡å¹³æ¨“ï¼Œæˆå’Œé“", 
                        "ç®•éˆåŠï¼Œè—å¡˜é“", "è·‘é¦¬åœ° (èŸ é¾é“)"
                    ],
                    "åœ°åœ–": "https://umap.openstreetmap.fr/en/map/1-maf-brr_1229519"
                },
                "å‡æ—¥ç­æ¬¡ï¼Œæ”¹ç¶“å¾·è¼”é“ä¸­": {
                    "åœç«™": [
                        "ä¸Šç’° (æ¸¯æ¾³ç¢¼é ­)", "ç„¡é™æ¥µå»£å ´ï¼Œå¾·è¼”é“ä¸­", "æ’ç”ŸéŠ€è¡Œç¸½è¡Œå¤§å»ˆï¼Œå¾·è¼”é“ä¸­", "å¾·å¿Œåˆ©å£«è¡—ï¼Œå¾·è¼”é“ä¸­", 
                        "æ­·å±±å¤§å»ˆï¼Œå¾·è¼”é“ä¸­", "é®æ‰“èŠ±åœ’ï¼Œå¾·è¼”é“ä¸­", "é‡‘é˜å»Šï¼Œé‡‘é˜é“", "è»å™¨å» è¡—ï¼Œè»’å°¼è©©é“", "æŸ¯å¸ƒé€£é“ï¼Œè»’å°¼è©©é“", 
                        "è­šè‡£é“ï¼Œè²æ—æ˜é“", "å…‹è¡—ï¼Œç£ä»”é“", "å¤©æ¨‚é‡Œï¼Œç£ä»”é“", "é€¸å»¬ï¼Œé»ƒæ³¥æ¶Œé“", 
                        "é›…è°·å¤§å»ˆï¼Œé»ƒæ³¥æ¶Œé“", "è·‘é¦¬åœ°ï¼ˆä¸‹ï¼‰ï¼Œé»ƒæ³¥æ¶Œé“", "å¥•è”­è¡—ï¼Œæˆå’Œé“", "æ˜‡å¹³æ¨“ï¼Œæˆå’Œé“", 
                        "ç®•éˆåŠï¼Œè—å¡˜é“", "è·‘é¦¬åœ° (èŸ é¾é“)"
                    ],
                    "åœ°åœ–": "https://umap.openstreetmap.fr/en/map/1-maf-brr-holidays_1229520"
                }
            }
        }
    }
}

# ------------------- Streamlit UI è¨­å®š -------------------
st.set_page_config(page_title="æ¼¢å ¡å·´å£«è·¯ç·šè³‡æ–™", page_icon="ğŸšŒ", layout="wide")

st.markdown(
    """
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Source+Han+Sans+TC:wght@400;500&display=swap');
    html, body, [class*="css"]  {
        font-family: 'Source Han Sans TC', 'Roboto', sans-serif;
    }
    </style>
    """,
    unsafe_allow_html=True
)

st.title("ğŸšŒ æ¼¢å ¡å·´å£«è·¯ç·š")
st.subheader("æŸ¥é–±å„è·¯ç·šè³‡æ–™")
st.markdown("[ğŸ”— æ¼¢å ¡å·´å£« Spreadsheet](https://docs.google.com/spreadsheets/d/1_hF_4ObI7j7OKKa__Bs9-fCLS6jYLvtTxg_nzhzkLjU/edit?gid=956048970)")

# ------------------- åˆ†æ¬„ Layoutï¼šå·¦å³ç•Œé¢ -------------------
left_col, right_col = st.columns([3, 5])

with left_col:
    selected_route = st.selectbox("é¸æ“‡è·¯ç·š", list(routes.keys()))
    
    directions = routes[selected_route]["æ–¹å‘"]
    selected_direction = st.selectbox("é¸æ“‡æ–¹å‘", list(directions.keys()))
    
    variants = directions[selected_direction]
    selected_variant = st.selectbox("é¸æ“‡èµ°ç·š", list(variants.keys()))

    variant_data = variants[selected_variant]

    st.markdown("åœ°åœ–")

    # å»ºç«‹åœ°åœ– iframe URL
    map_url = variant_data["åœ°åœ–"]

    st.components.v1.html(f"""
        <iframe src="{map_url}"
            width="100%" height="500" frameborder="1"
            allowfullscreen allow="geolocation">
        </iframe>
         """, height=520)

with right_col:

    st.markdown("ğŸš åœç«™")
    for i, stop in enumerate(variant_data["åœç«™"], start=1):
        st.write(f"{i}. {stop}")